---
title: 'Vari√°veis de Ambiente'
description: 'Configura√ß√£o completa de todas as vari√°veis de ambiente do Eleva AI'
icon: 'gear'
---

# Vari√°veis de Ambiente

O Eleva AI utiliza vari√°veis de ambiente para configura√ß√£o de servi√ßos externos, funcionalidades e comportamentos do sistema. Este guia documenta todas as vari√°veis dispon√≠veis.

<Warning>
**IMPORTANTE**: Com o Sistema de Federa√ß√£o, as vari√°veis Evolution (`DATABASE_URL`, `EVOLUTION_API_URL`, etc.) **N√ÉO devem ser usadas diretamente**. Toda configura√ß√£o Evolution vem do Supabase.
</Warning>

## üîß Configura√ß√£o B√°sica

### Core Application

<ParamField path="NODE_ENV" type="string" default="development">
  Ambiente de execu√ß√£o da aplica√ß√£o
  - `development` - Desenvolvimento local
  - `production` - Produ√ß√£o
  - `test` - Testes automatizados
</ParamField>

<ParamField path="NEXT_PUBLIC_APP_URL" type="string" required>
  URL base da aplica√ß√£o
  ```
  # Desenvolvimento
  NEXT_PUBLIC_APP_URL=http://localhost:3000
  
  # Produ√ß√£o  
  NEXT_PUBLIC_APP_URL=https://app.eleva-ai.com
  ```
</ParamField>

<ParamField path="SESSION_SECRET" type="string" required>
  Chave secreta para criptografia de sess√µes (m√≠nimo 32 caracteres)
  ```
  SESSION_SECRET=sua-chave-super-secreta-de-32-chars-ou-mais
  ```
</ParamField>

### Supabase (Database Principal)

<ParamField path="NEXT_PUBLIC_SUPABASE_URL" type="string" required>
  URL do projeto Supabase
  ```
  NEXT_PUBLIC_SUPABASE_URL=https://seu-projeto.supabase.co
  ```
</ParamField>

<ParamField path="NEXT_PUBLIC_SUPABASE_ANON_KEY" type="string" required>
  Chave p√∫blica do Supabase para opera√ß√µes client-side
</ParamField>

<ParamField path="SUPABASE_SERVICE_ROLE_KEY" type="string" required>
  Chave de servi√ßo do Supabase com privil√©gios admin (server-side only)
</ParamField>

<ParamField path="SUPABASE_DATABASE_URL" type="string" optional>
  Connection string direto do PostgreSQL Supabase (para scripts)
  ```
  SUPABASE_DATABASE_URL=postgresql://user:pass@db.supabase.co:5432/postgres
  ```
</ParamField>

### Redis (Cache & Sessions)

<ParamField path="REDIS_URL" type="string" required>
  URL de conex√£o Redis
  ```
  # Local
  REDIS_URL=redis://localhost:6379
  
  # Produ√ß√£o (Railway/Upstash)
  REDIS_URL=redis://user:pass@host:port
  ```
</ParamField>

## ü§ñ Intelig√™ncia Artificial

### OpenAI

<ParamField path="OPENAI_API_KEY" type="string" required>
  Chave da API OpenAI para GPT-4 e an√°lise visual
  ```
  OPENAI_API_KEY=sk-...
  ```
</ParamField>

<ParamField path="OPENAI_MODEL" type="string" default="gpt-4o-mini">
  Modelo OpenAI padr√£o para processamento de texto
  - `gpt-4o-mini` - Mais econ√¥mico, boa performance
  - `gpt-4o` - Maior capacidade, mais caro
  - `gpt-3.5-turbo` - Legacy, n√£o recomendado
</ParamField>

### Groq

<ParamField path="GROQ_API_KEY" type="string" required>
  Chave da API Groq para transcri√ß√£o de √°udio ultrarr√°pida
  ```
  GROQ_API_KEY=gsk_...
  ```
</ParamField>

<ParamField path="GROQ_MODEL" type="string" default="whisper-large-v3">
  Modelo Groq para transcri√ß√£o
  - `whisper-large-v3` - Melhor qualidade (recomendado)
  - `whisper-large-v2` - Boa qualidade, mais r√°pido
</ParamField>

## üì± WhatsApp Evolution (DEPRECIADAS)

<Warning>
**‚ö†Ô∏è AVISO IMPORTANTE**: As vari√°veis abaixo s√£o **DEPRECIADAS** e **N√ÉO devem ser usadas diretamente**. 

Com o Sistema de Federa√ß√£o, toda configura√ß√£o Evolution vem do Supabase (`evolution_databases` table). Essas vari√°veis existem apenas para compatibilidade com c√≥digo legado.
</Warning>

<ParamField path="DATABASE_URL" type="string" deprecated>
  ‚ùå **N√ÉO USAR** - Use `queryByInstance()` da federa√ß√£o
</ParamField>

<ParamField path="EVOLUTION_API_URL" type="string" deprecated>
  ‚ùå **N√ÉO USAR** - Use `getInstanceApiConfig()` da federa√ß√£o
</ParamField>

<ParamField path="EVOLUTION_API_KEY" type="string" deprecated>
  ‚ùå **N√ÉO USAR** - Use `getInstanceApiConfig()` da federa√ß√£o
</ParamField>

<ParamField path="EVOLUTION_WS_URL" type="string" deprecated>
  ‚ùå **N√ÉO USAR** - Use `getInstanceWebSocketConfig()` da federa√ß√£o
</ParamField>

## üß† Sistema MemOS v2

### Core Memory Features

<ParamField path="SUMMARY_ENABLED" type="boolean" default="true">
  Ativa sistema de resumos para reduzir uso de tokens
  ```
  SUMMARY_ENABLED=true
  ```
</ParamField>

<ParamField path="SUMMARY_BUFFER_ENABLED" type="boolean" default="true">
  Buffer de resumos para otimizar conversas longas
</ParamField>

<ParamField path="INSTANCE_SUMMARY_ENABLED" type="boolean" default="true">
  Resumos espec√≠ficos por inst√¢ncia WhatsApp
</ParamField>

<ParamField path="SUMMARY_REDIS_CACHE_ENABLED" type="boolean" default="true">
  Cache Redis para resumos frequentemente acessados
</ParamField>

### Working Memory

<ParamField path="WORKING_MEMORY_TOOL_ENABLED" type="boolean" default="true">
  Sistema de mem√≥ria ativa para conversas em andamento
</ParamField>

<ParamField path="BUFFER_MEMORY_MAX_SIZE" type="number" default="50">
  Tamanho m√°ximo do buffer de mem√≥ria ativa
</ParamField>

<ParamField path="BUFFER_MEMORY_WINDOW_TYPE" type="string" default="sliding">
  Tipo de janela de mem√≥ria
  - `sliding` - Janela deslizante (recomendado)
  - `fixed` - Janela fixa
</ParamField>

<ParamField path="BUFFER_MEMORY_TTL" type="number" default="3600">
  TTL em segundos para itens do buffer (1 hora)
</ParamField>

### Advanced Processing

<ParamField path="USE_COT" type="boolean" default="true">
  Chain-of-Thought reasoning para an√°lises complexas
</ParamField>

<ParamField path="MEMORY_COT_REASONING" type="boolean" default="true">
  Racioc√≠nio COT espec√≠fico para processamento de mem√≥rias
</ParamField>

<ParamField path="MEMORY_QA_DETECTION" type="boolean" default="true">
  Detec√ß√£o autom√°tica de perguntas e respostas
</ParamField>

<ParamField path="MEMORY_TOPIC_EVOLUTION" type="boolean" default="true">
  Rastreamento da evolu√ß√£o de t√≥picos ao longo do tempo
</ParamField>

<ParamField path="MEMORY_RELATIONSHIP_ANALYSIS" type="boolean" default="true">
  An√°lise de relacionamentos entre entidades
</ParamField>

### Performance Features

<ParamField path="BATCH_PERSIST_ENABLED" type="boolean" default="true">
  Persist√™ncia em lote para melhor performance
</ParamField>

<ParamField path="PIPELINE_CHUNKING_ENABLED" type="boolean" default="true">
  Processamento em chunks para conversas muito longas
</ParamField>

### Graph Memory (Experimental)

<ParamField path="GRAPH_MEMORY_ENABLED" type="boolean" default="false">
  Sistema experimental de mem√≥ria em grafo
  ```
  # Apenas para ambiente de testes
  GRAPH_MEMORY_ENABLED=true
  ```
</ParamField>

<ParamField path="TEMPORAL_GRAPH_ENABLED" type="boolean" default="false">
  Grafos temporais para an√°lise de evolu√ß√£o
</ParamField>

### Garbage Collection

<ParamField path="MEMORY_GC_ENABLED" type="boolean" default="true">
  Limpeza autom√°tica de mem√≥rias de baixa qualidade
</ParamField>

<ParamField path="MEMORY_GC_TTL_DAYS" type="number" default="0">
  Dias para expirar mem√≥rias (0 = nunca expira por idade)
</ParamField>

<ParamField path="MEMORY_GC_CONFIDENCE_MAX" type="number" default="0.3">
  Limite m√°ximo de confian√ßa para garbage collection (0.0-1.0)
</ParamField>

## üöÄ Sistema Multi-Agente Bootstrap

<ParamField path="BOOTSTRAP_USE_MULTI_AGENT" type="boolean" default="true">
  Ativa o sistema multi-agente bootstrap
  ```
  BOOTSTRAP_USE_MULTI_AGENT=true
  ```
</ParamField>

<ParamField path="BOOTSTRAP_CONFIDENCE_THRESHOLD" type="number" default="0.7">
  Limite m√≠nimo de confian√ßa para aplicar bootstrap autom√°tico
</ParamField>

## üéØ Feature Flags

### AI/Memos System

<ParamField path="MEMOS_USE_GRANULAR_V3" type="boolean" default="true">
  Sistema de mem√≥ria granular v3 com maior precis√£o
</ParamField>

<ParamField path="MEMOS_USE_DUAL_TASK_GENERATION" type="boolean" default="true">
  Gera√ß√£o dupla de tarefas (imediata + futura)
</ParamField>

<ParamField path="MEMOS_USE_LOSS_DETECTION" type="boolean" default="true">
  Detec√ß√£o autom√°tica de eventos de perda de leads
</ParamField>

### Prompt Engineering

<ParamField path="PROMPTS_USE_V2_TASK_GENERATION" type="boolean" default="true">
  Prompts v2 para gera√ß√£o de tarefas (agent-style)
</ParamField>

<ParamField path="PROMPTS_USE_V2_MEMORY_ENRICHMENT" type="boolean" default="true">
  Prompts v2 para enriquecimento de mem√≥ria
</ParamField>

<ParamField path="PROMPTS_USE_AGENT_ORCHESTRATOR" type="boolean" default="true">
  Orquestrador de workflow tipo agente
</ParamField>

<ParamField path="PROMPTS_USE_CONFIDENCE_CALIBRATION" type="boolean" default="true">
  Calibra√ß√£o de confian√ßa para opera√ß√µes de IA
</ParamField>

## üé¨ Processamento de M√≠dia

### Timeouts

<ParamField path="PDF_DOWNLOAD_TIMEOUT" type="number" default="30000">
  Timeout em ms para download de PDFs
</ParamField>

<ParamField path="MEDIA_PROXY_TIMEOUT" type="number" default="30000">
  Timeout em ms para proxy de m√≠dia
</ParamField>

### Processamento Autom√°tico

<ParamField path="AUTO_PROCESS_MEDIA" type="boolean" default="true">
  Processamento autom√°tico de m√≠dia em conversas
  ```
  # Para desabilitar
  AUTO_PROCESS_MEDIA=false
  ```
</ParamField>

## üîç UI & Debug

### Annotations

<ParamField path="UI_ANNOTATIONS_ENABLED" type="boolean" default="true">
  Anota√ß√µes visuais na interface para opera√ß√µes de mem√≥ria
</ParamField>

<ParamField path="REASONING_TOGGLE_ENABLED" type="boolean" default="true">
  Toggle para exibir/ocultar racioc√≠nio da IA
</ParamField>

<ParamField path="SIDEBAR_RELEVANT_MEMS_ENABLED" type="boolean" default="true">
  Sidebar com mem√≥rias relevantes no contexto atual
</ParamField>

<ParamField path="AUDIT_PANEL_ENABLED" type="boolean" default="true">
  Painel de auditoria para opera√ß√µes cr√≠ticas
</ParamField>

### Debug Mode

<ParamField path="NEXT_PUBLIC_DEBUG_MODE" type="boolean" default="false">
  Ativa logs de debug no console (apenas desenvolvimento)
  ```
  NEXT_PUBLIC_DEBUG_MODE=true
  ```
</ParamField>

<ParamField path="NEXT_PUBLIC_DEBUG_DIAGNOSTIC" type="boolean" default="false">
  Canal de diagn√≥sticos detalhado para eventos SSE
</ParamField>

## üìß Notifica√ß√µes

### Email (Nodemailer)

<ParamField path="SMTP_HOST" type="string" optional>
  Servidor SMTP para envio de emails
  ```
  SMTP_HOST=smtp.gmail.com
  ```
</ParamField>

<ParamField path="SMTP_PORT" type="number" default="587">
  Porta do servidor SMTP
</ParamField>

<ParamField path="SMTP_USER" type="string" optional>
  Usu√°rio SMTP
</ParamField>

<ParamField path="SMTP_PASS" type="string" optional>
  Senha SMTP
</ParamField>

### Webhooks

<ParamField path="WEBHOOK_SECRET" type="string" required>
  Segredo para valida√ß√£o de webhooks Evolution
  ```
  WEBHOOK_SECRET=sua-chave-webhook-segura
  ```
</ParamField>

## üèóÔ∏è Build e Deploy

### Next.js

<ParamField path="NEXT_TELEMETRY_DISABLED" type="boolean" default="false">
  Desabilita telemetria do Next.js
  ```
  NEXT_TELEMETRY_DISABLED=1
  ```
</ParamField>

<ParamField path="TURBOPACK" type="boolean" default="false">
  For√ßa uso do Turbopack em desenvolvimento
  ```
  TURBOPACK=1
  ```
</ParamField>

## üìã Exemplo Completo (.env.local)

```bash
# ============================================
# ELEVA AI - CONFIGURA√á√ÉO COMPLETA
# ============================================

# --- Core Application ---
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
SESSION_SECRET=sua-chave-super-secreta-de-32-chars-ou-mais

# --- Supabase (OBRIGAT√ìRIO) ---
NEXT_PUBLIC_SUPABASE_URL=https://seu-projeto.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua-chave-publica
SUPABASE_SERVICE_ROLE_KEY=sua-chave-de-servico

# --- Redis (OBRIGAT√ìRIO) ---
REDIS_URL=redis://localhost:6379

# --- Intelig√™ncia Artificial (OBRIGAT√ìRIO) ---
OPENAI_API_KEY=sk-sua-chave-openai
GROQ_API_KEY=gsk_sua-chave-groq

# --- MemOS v2 (RECOMENDADO) ---
SUMMARY_ENABLED=true
WORKING_MEMORY_TOOL_ENABLED=true
USE_COT=true
MEMORY_GC_ENABLED=true
MEMORY_GC_CONFIDENCE_MAX=0.3

# --- Multi-Agent Bootstrap ---
BOOTSTRAP_USE_MULTI_AGENT=true

# --- Feature Flags ---
MEMOS_USE_GRANULAR_V3=true
PROMPTS_USE_V2_TASK_GENERATION=true

# --- Webhooks ---
WEBHOOK_SECRET=sua-chave-webhook-segura

# --- Debug (apenas desenvolvimento) ---
NEXT_PUBLIC_DEBUG_MODE=false
NEXT_TELEMETRY_DISABLED=1
```

## ‚ö†Ô∏è Vari√°veis Cr√≠ticas de Seguran√ßa

<Warning>
**NUNCA committar essas vari√°veis no Git:**
- `SESSION_SECRET`
- `SUPABASE_SERVICE_ROLE_KEY` 
- `OPENAI_API_KEY`
- `GROQ_API_KEY`
- `WEBHOOK_SECRET`
- Qualquer chave de API ou senha
</Warning>

### Checklist de Seguran√ßa

<Steps>
  <Step title="Arquivo .env.local no .gitignore">
    Confirmar que `.env.local` est√° listado no `.gitignore`
  </Step>
  
  <Step title="Rota√ß√£o Regular de Chaves">
    Rotacionar chaves de API periodicamente (trimestral)
  </Step>
  
  <Step title="Princ√≠pio do Menor Privil√©gio">
    Usar chaves com m√≠nimas permiss√µes necess√°rias
  </Step>
  
  <Step title="Monitoramento de Uso">
    Configurar alertas para uso an√¥malo de APIs
  </Step>
</Steps>

---

<Info>
**Dica**: Use o comando `npm run validate:setup` para verificar se todas as vari√°veis obrigat√≥rias est√£o configuradas corretamente.
</Info>